# 程序员编程艺术编码规范
## 主旨
由于本书成书于多位作者的辛勤劳动，虽然大家都努力保证内容质量和文风一致，但由于各人背景、行文时间等原因，每人贡献的内容、尤其代码多有悬殊。为使本书优质流畅而有浑然天成之体貌，也为保障本书所记载代码切实可行、堪作标杆，所以，来统一文风、历练代码，垂青万世。。 blah.. blah...

## 立意
本书所载代码以c语言为主，一求规范便于演示算法、二求实战实用（符合工业标准）、三则为。。 blah..

## 规范来源
TODO

## 定义
什么是代码规范

```cpp
    代码规范是指“在一定组织范围内，对特定编程语言的编码风格的一种约定”。
```

上面是一般的定义，也适用于本书，但是本书更加强调针对算法的示例和工业实用性，所以本书的定义为

```cpp
    代码规范是指“在本书及衍生范围内，出于算法示例和工业实用的目的对以c语言为主的编程语言的风格约定”。
```

## 意义
1. 突出本书主旨
2. 统一多人合作的文风
3. 提高代码可读性与质量，较少bug降低维护成本
3. 利于读者学习本书，并能在实际工作、教学中举一反三，自我成长

## 现存代码问题示例
例子没有找好，顺手放的两段代码，风格略异

```cpp
bool compare(string &a,string &b)
{
    for (int i = 0; i < b.length(); ++i) {
        int j;
        for (j = 0; (j < a.length()) && (a[j] != b[i]); ++j)
            ;
        if (j >= a.length())
        {
            return false;
        }
    }
    return true;
}
```

```c
i = left + 1;
j = right - 2;
for (;;)
{
    while ( a[i] < pivot ) i++;
    while ( a[j] > pivot ) j--;
    if ( i < j )
        swap( &a[i], &a[j] );
    else
        break;
}
```

## TAOPP代码规范
### 头文件
1. #include<> 用于系统头文件，#include "" 用于用户头文件
2. #include包含的顺序：c标准库头文件 -> C++标准库头文件 -> 第三方库头文件 -> 用户头文件
3. 头文件组织方式：文件申明 -> include guard -> include headers -> namespace -> 类型申明 -> 内联函数/模板

示例如下：

```cpp
/**
 * Copyright(c) 2014 the TAOPP Authors.
 * ...
 */

#ifndef __MY_HEAD_H
#define __MY_HEAD_H

#include <>
...

#include ""
...

namespace xxx
{
    class c {
	    inline int GetValue();
		...
	};

    int cls:GetData() { ... }
} // namespace xxx

#endif // __MY_HEAD_H
```

### 源文件组织
1. 文件声明
2. 引用的头文件
3. 内部自定义类型声明
4. 内部函数声明
5. 全局变量定义
6. 类静态变量定义
7. 函数实现

### 书写风格
1. 示例有问题的代码（反面教材）的时候用"?"号开头，如

```cpp
    ? int i;
	? if (i > 0) { i++; j=i; }
```

2. 本规范有部分是建议性的，采用[Optional]开头

### 代码风格
#### 换行
1. "{"后和"}"前面，必须换行
2. else if写在同一行
3. 用空行来分割代码块

#### 空格
1. 用空格替换TAB。虽然算法竞赛鼓励用TAB来缩进（这样节省代码大小），但在工业上却是一种不良的习惯，对于阅读、解析和多人合作都有害无益。本书代码以工业标准为主，故推荐用空格替换TAB。
2. 运算符前后使用一个空格，便于阅读
    不好的风格

```cpp
    ? x=a?b:c;
```

    良好的风格

```cpp
    x = a ? b : c;
```

3. ","和";"后面n跟上一个空格
    不好的风格

```cpp
    ? func(arg1,arg2,arg3);
	? for (i = 0;i < 10;i++) { ... }
```

    良好的风格

```
    func(arg1, arg2, arg3);
	for (i = 0; i < 10; i++) { ... }
```

4. 条件、分支保留字，if for while else switch,前后留出一个空格
    不好的风格

```
    ? if(a > 10){ ... }
```
	
    良好的风格

```
    if (a > 10) { ... }
```

#### 不使用空格的情况（optional）

1. "[]","."和"->"前后

2. 对c语言，*后面不留空格如 int *p; 对C++语言，* &前面不留空格如 const int* rhs;

3. 函数申明、函数调用的左括号前;

4. "("向后紧跟，而")"、","、";"向前紧跟

5. 一元运算符前后： !, ~, ++, --, &

#### 缩进
1. 用空格替换TAB。虽然算法竞赛鼓励用TAB来缩进（这样节省代码大小），但在工业上却是一种不良的习惯，对于阅读、解析和多人合作都有害无益。本书代码以工业标准为主，故推荐用空格替换TAB。

2. [Optional]代码缩进使用4个空格。

3. 例外：namespace内的代码；public/protected/private关键字；case/default关键字

#### [Optional]代码行长度
建议每行小于80个字符，以适应大多数终端类型。

#### 函数书写
1. [Optional]按书写次序从左到右，先提供输入参数，再提供输出参数
2. 对参数进行有效性检测
3. 函数嵌套层数不超过3层
4. 一个函数专注一件事

#### 命名规则
1. 可以选用：驼峰法；c语言的全小写加下划线法。请大家评议
2. 函数驼峰法第一个单词首字符大写，后面每个单词首字符大写；变量第一个单词首字符小写
3. 变量尽量使用全名，如 highestTemprature；对于已经公认了的写法才使用缩写，如 tmp mid prev next
4. 变量名能“望文生义”，如v1,v2不如area,height
5. 函数名采用动词+名词形式：如 CreateTmpDir(), free_2d_array()
6. 宏和枚举采用下划线分割的全大写形式，如 DAYS_IN_FEB
7. 全局变量使用google建议，g_开头，如 g_retval
8. 常量采用google建议，k开头，如 kMaxNumber（c++建议使用这种风格）；或者使用宏定义
9. 类成员使用 m_, ms_ 开头，如 m_name

## 参考资料推荐

(待写。。）
